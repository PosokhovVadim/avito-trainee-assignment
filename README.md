# avito-trainee-assignment

## Usage:

- `make init` - инициализация проекта, выполнение миграций, запуск в фоновом режиме
- `make stop` / `make run` - остановка / запуск контейнеров
- `make migrateup` / `make migratedown` - выполнение / откат миграций
- `make down` - удаление контейнеров

Для проверки достаточно будет использовать `make init`. Для удобства через миграции в бд уже вставлено несколько тегов, фич и баннеров.

## Checking endpoints:

- `Проверка прав`

![Проверка прав](img/image.png)

- `Получение контента баннера для пользователя`

![Получение контента баннера для пользователя](img/userBanner200.png)

- `Получение списка баннеров с токеном пользователя`

![Получение списка баннеров](img/accessDenied.png)

- `Получение списка баннеров с токеном админа`

![Получение списка баннеров](img/getAllBanners.png)

- `Получение списка баннеров с различными параметрами 1`

![использование параметров 1](img/GetBanners2.png)

- `Получение списка баннеров с различными параметрами 2`

![использование параметров 2](img/GetBanners3.png)

- `Создание нового баннера`

![Создание нового баннера](img/SaveBanner.png)

- `список баннеров после вставки`

![список баннеров после вставки](img/CheckInsert.png)

- `обновление созданного баннера`

![Обновление созданного баннера](img/update.png)

- `список баннеров после вставки`

![список баннеров после вставки](img/AfterUpdate.png)
При обновлении указал флаг активности false.

- `Проверка доступа неактивного баннера для пользователя`

![для пользователя](img/TryToCheckNotAcvtive.png)

- `Проверка доступа неактивного баннера для админа`

![для админа](img/TryToCheckNonActiveByAdmin.png)

- `Удаление баннера`

![alt text](img/remove.png)

- `Баннеры после удаления `

![alt text](img/AfterRemove.png)

- `Использование параметра use_last_revision. Список баннеров : `

![alt text](img/smatrtesting1.png)

- `Использование параметра use_last_revision. Получаем контент самого последнего баннера : `

![alt text](img/smarttesting2.png)

- `Использование параметра use_last_revision. Тот же запрос без флага : `

![alt text](img/smarttesting3.png)


## Insert Template

Шаблон для тела запроса POST /banner

```json
{
    "tag_ids": [4, 5],
    "feature_id": 3,
    "content": {
        "message": "breaking news",
        "title": "lastest banner"
    },
    "is_active": true
}
